volumes:
  vol-cassandra-data:
    name: foo-cassandra-data
  vol-cassandra-commitlog:
    name: foo-cassandra-commitlog
  vol-cassandra-saved_caches:
    name: foo-cassandra-saved_caches

services:

  cassandra:
    image: cassandra:5-jammy
    container_name: database-cassandra
    ports:
      - "9042:9042"
    volumes:
      - vol-cassandra-data:/var/lib/cassandra/data
      - vol-cassandra-commitlog:/var/lib/cassandra/commitlog
      - vol-cassandra-saved_caches:/var/lib/cassandra/saved_caches
    restart: unless-stopped

    healthcheck:
      test: ["CMD", "cqlsh", "-e", "describe keyspaces"]
      interval: 30s
      timeout: 10s
      retries: 5